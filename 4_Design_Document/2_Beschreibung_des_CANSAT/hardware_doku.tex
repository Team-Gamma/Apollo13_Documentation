\section{Beschreibung des CanSat}


% Blockdiagramm (irgendjemand)
\subsection{Missionsüberblick}
Wir haben uns für den Satelliten überlegt, dass dieser so individuell wie möglich sein soll. Daher greifen wir nicht auf das vom Wettbewerb bereitgestellte T-Minus-CanSat-Kit zurück. Stattdessen haben wir uns im Detail überlegt, welche Sensoren unseren Erwartungen entsprechen und wie wir diese bestmöglich innerhalb der Dose platzieren können. Zusätzlich möchten wir nicht auf eine standardisierte Getränkedose als Hülle zurückgreifen, sondern auch hier unser eigenes Design erschaffen.

% 3D Skizze, Erklärung der einzelnen Bestandteile (Alexander B.)
\input {./2_Beschreibung_des_CANSAT/hardware_mechanischesDesign_doku}

% Elektrisches Vorgehen, Schaltplan, Funkverbindung (Till)
\input {./2_Beschreibung_des_CANSAT/hardware_elektrischeKonstruktion_doku}

% Programmiersprache, Entwicklungsumgebung, abschätzung Datenmenge, Programmablauf (PAP), Datenverarbeitung (Steffen)
\input {./2_Beschreibung_des_CANSAT/hardware_softwareentwurf_doku}

% Fallschirm (Alexander F.)
\input {./2_Beschreibung_des_CANSAT/hardware_bergungssystem_doku}

\subsection{Antenne}
Wir haben uns für den Bau einer Helixantenne entschieden. Diese hat gegenüber der Yagi-Antenne eine größere Verlässlichkeit beim Empfangen von Daten, da ihr Ausrichtungswinkel im Bezug auf den CanSat keine Rolle spielt und so durch die ständige Rotation des CanSats keine Daten verloren gehen können. Der größte Nachteil bei einer Helixantenne ist, dass sie eine fast 1m² große Bodenplatte besitzt. Da unsere Helixantenne von einer Person gehalten wird, haben wir darauf Wert gelegt, diese so leicht wie nur möglich zu bauen. Um das Gewicht der Antenne zu reduzieren, haben wir eine zwei Millimeter dicke Bodenplatte verwendet, was im Gegensatz zu oft verwendeten drei Millimeter dicken Bodenplatten ziemlich gering ist. Diese erfüllt, auch wenn sie nur ein Drittel der Empfangseffektivität besitzt, die benötigte Belastungsgrenze. Zusätzlich haben wir in die Bodenplatte, in einem symmetrischen Muster, viele kleine Löcher hineingebohrt. Mit diesen zahlreichen Löchern haben wir nochmals das Gewicht der Bodenplatte um ein Drittel reduziert. Die Löcher stören dabei nicht die Empfangseffektivität, da sie nur etwa ein Zehntel der Größe haben, die sie haben müssten, damit es Probleme beim Empfang gäbe.

\subsection{Aufgetretene Probleme}
Während des Baus des CanSats sind selbstverständlich einige Probleme aufgetreten. Manche dieser Probleme waren relativ leicht zu lösen, andere erforderten eine detaillierte Recherche. Im Nachfolgenden werden einige dieser Probleme und unsere Lösungsansätze erläutert.

\begin{itemize}
	\item \textbf{Befestigung der Dosendeckel}: Es war vorerst geplant, durchgängige Gewindestangen zu verwenden, welche durch die Wand führen und so die Deckel und die Wand miteinander verbinden. Diese Stangen kollidierten jedoch mit den Löchern für die Befestigung des Mikrokontorollers und der Sensorikplatine. Nach verhältnismäßig langem Überlegen und Ausprobieren haben wir uns dazu entschlossen, die Gewindestangen nicht durchgängig zu gestalten. Stattdessen werden sie lediglich durch den Fuß und den Kopf der Wand gesteckt und dort verschraubt. Dies hat den Vorteil, dass wir das Gewicht deutlich verringern und wir innerhalb des CanSats wesentlich mehr Freiräume haben, um Objekte zu platzieren. Nachteilig ist jedoch, dass dadurch die Stabilität verringert wird.
	\item \textbf{Spektrum des UV-Sensors}: Unser UV -Sensor misst die Intensität der Strahlung, welche im Spektrum 280-390 nm liegt. Dies hat die Folge, dass der Output des Sensors deutlich über dem zu erwartenden Wert liegt und es relativ schwer fällt, einen Vergleich zwischen diversen Messungen aufzustellen. Dies liegt daran, dass man nicht verifizieren kann, welche Wellenlänge mit welchem Anteil an dem Gesamtoutput beteiligt sind.
	\item \textbf{Intensität des Sharp-Feinstaubsensors}: Zunächst war der Sharp-Sensor dazu gedacht, die Feinstaubkonzentration in unserer Athmosphäre zu messen. Jedoch mussten wir feststellen, dass der Sensor keineswegs Feinstäube, sondern groberen Staub, wie zum Beispiel Hausstaub, misst. Dies stellte deshalb ein Problem dar, da wir bis dato das komplette Dosendesign auf den Sharp-Sensor abstimmten. Ein neuer Sensor war zwar verfügbar, konnte jedoch aufgrund des Dosendesigns nicht integriert werden, da dieser zu groß ist. Da es durchaus möglich ist mit dem Sharp-Sensor halbwegs akzeptable Werte zu erlangen, wenn man Referenzmessungen durchführt, bleibt dieser zumindest vorerst im Gesamtsystem erhalten.
	\item \textbf{Geeigneter Ozon-Sensor}: Es hat sich als äußert schwierig erwiesen, einen Ozon Sensor zu finden, welcher keine lange Vorlaufzeit benötigt, verhältnismäßig klein ist und nicht übermäßig viel kostet. Daher ist es aktuell nicht mehr geplant, einen Ozon Sensor innerhalb des CanSats unterzubringen.
	\item \textbf{BeagleBone Black}: Zu Beginn unserer Arbeit am BeagleBone hatten wir einige Probleme mit diesem. Beispielsweise ließ sich zunächst die Python-Library für das BeagleBone nicht verwenden. Einige Pins ließen sich nicht ansteuern, was zu Fehlern führte. Letztlich fanden wir heraus, dass die Linux Distribution Debian auf dem System installiert war. Dieses ist jedoch für das BeagleBone Black noch in der Testphase und kann Bugs hervorrufen. Gelöst wurde das Problem, indem der Speicher mit dem Defaultsystem Linux Angstrom geflasht wurde. Danach funktionierte das Ausführen von Pythoncode ohne jegliche Probleme. Schließlich bootete das Beagle gegen Ende des Projektes nicht mehr und nach sorgfältiger Recherche im Internet stellte sich heraus, dass es sich um einen bekannten Fehler handelt, welcher allerdings mehrere Ursachen haben kann. Letztlich ist uns nicht bekannt weshalb das Beagle nicht mehr funkioniert, jedoch liegt die einzige Abhilfe in einem neuen Mikrocontroller. Da unser Dosendesign jedoch für das Beagle konzipiert wurde, blieb uns nichts anderes übrig als ein neues Beagle zu besorgen.
	\item \textbf{UART und I2C-Bus}: Bei der Übertragung mithilfe von UART und dem I²C-Bus sind wir auf Probleme in Kombination mit dem BeagleBone gestoßen. Dieses hatte verschiedene Ports und Protokolle standardmäßig nicht aktiviert. Wir mussten im Linux-System Angstrom einige Startroutinen hinzufügen, sodass bei jedem Start auch alle Ports und Protokolle aktiviert werden. Am Ende kostete dies viel Zeit, da die Dokumentation des BeagleBone in diesem Punkt nicht detailgenau war und für verschiedene Versionen verschiedene Lösungen des Problems existieren.
\item \textbf{Berechnung der Fallschirmgröße}: Das Ergebnis der Größenberechnung des Fallschirms erschien uns nicht realistisch. Der genutzte Cw-Wert hat einen Formfaktor, der nicht unseren Fallschirmen entsprach. Daher wurde beschlossen, einige Tests durchzuführen, um die Werte genauer zu bestimmen (siehe Testkonzept).
\item \textbf{Haltbarkeit des Gazestoffes}: Beim Bau des Fallschirms ist uns aufgefallen, dass der Stoff, der die Dose mit dem Fallschirm befestigt, eventuell nicht stark genug ist. Durch die sehr löchrige Struktur kann es schnell zu kleinen Rissen kommen. Werden diese zu stark belastet können diese sich ausbreiten.
\item \textbf{Durchmesser des CanSats}: Wir sind zu Beginn des Projektes davon ausgegangen, dass der Durchmesser des CanSats dem einer standardisierten Getränkedose entspricht (67mm). Zu spät ist uns aufgefallen, dass dies ein Irrtum war, und der Durchmesser 66mm betragen muss. Dies stellt jedoch kein Problem dar, da wir die Dicke der Außenwand problemlos um 0,5mm verringern können.
\item \textbf{Energieversorgung des Transceivers}: Das Transceiver-Modul unseres CanSats, ist das einzige Bauteil, welches eine 5V Spannungsversorgung benötigt. Dies stellte uns vor einige Probleme, da der 5V Output des Beagles lediglich die Betriebsspannung des Beagles ausgab, welche in unserem Fall bedingt durch die gewählten Batterien bei rund 7,2V lag. Dementsprechend würde eine überhöhte Spannung am Modul anliegen, welche dieses beschädigen würde. Letztlich wurde das Problem gelöst, indem die Spannung des Output-Pins mithilfe eines Vorwiderstandes und einer Z-Diode auf rund 5V reduziert wurde. Diese Lösung schließt Spannungsschwankungen, bedingt durch schwankende Stromstärken oder durch schwankende Eingangsspannungen am Beagle, nicht aus. Dies stellt jedoch kein Problem dar, da das Transceiver-Modul mit einer Spannung zwischen 3,5V und 5,5V arbeiten kann. Wollte man diese Schwankungen vollständig eliminieren, würde man um einen Spannungsregler nicht herum kommen, wobei mit erheblicher Verlustleistung zu rechnen wäre, welche wir nicht verkraften können da die Batterien in Bezug auf ihre Ladungsmenge bereits relativ knapp kalkuliert sind. 
\item \textbf{Unterbringung der Batterie}: Die Unterbringung der Spannungsversorgung unseres CanSats stellte uns gegen Ende des Projektes vor große Probleme, da wir der Unterbringung bis dato in unserem Dosendesign kaum Aufmerksamkeit geschenkt hatten. Letztlich gab es sogar Probleme ein Batteriefach für zwei Mignon-AA-Batterien unterzubringen. Dennoch schafften wir es mithilfe einer 3D-gedruckten Konstruktion das Batteriefach am Beagle selbst zu befestigen.
\item \textbf{Unterbringung des Schalters}: Nachdem das Problem der Unterbringung der Spannungsversorgung gelöst war, fiel uns auf, dass wir noch einen Hauptschalter benötigen. Letztlich lösten wir das Problem, indem wir ein Batteriefach für zwei Mignon-AA-Batterien mit einem Schalter verwendeten.
\item \textbf{Eine passende Batterie}: Einer der größten Nachteile am BeagleBone Black ist der vergleichsweise enorme Energiebedarf. Das Board benötigt im laufenden Betrieb ca. 200mA und während des Bootvorganges sogar kurzzeitig das Doppelte. Es gibt zwar eine Vielzahl an Lithium-Polymer (LiPo) Akkumulatoren, jedoch konnten wir keinen LiPo Akku finden, welcher die benötigte Stromstärke, Kapazität und Spannung mitbringt und zusätzlich eine Größe (bzw. ein Format) besitzt, welches sich in unser Dosendesign eingliedert. Dieses Problem wurde schlussendlich durch zwei Mignon-AA- Batterien gelöst (näheres im Entsprechenden Kapitel). Dies ist mit Sicherheit keine optimale Lösung, für uns jedoch bei weitem die Beste.
\item \textbf{Anschluss von UART und ADC Sensoren an den I²C-Bus}: Unser Plan war gewesen, alle Sensoren an den I²C-Bus anzuschließen. Daraus hätte sich ein softwareseitiger Vorteil ergeben, der die Entwicklung und die Geschwindigkeit der auf dem Mikrocontroller ausgeführten Software deutlich verbessert hätte. Jedoch entschieden wir uns aus verschiedenen Gründen dagegen. Zunächst würde jeder Sensor seinen eigenen Analog zu Digital Converter benötigen, was bei uns zu erheblichen Platzproblemen geführt hätte. Desweiteren standen wir unter zeitlichem Druck und andere Probleme erforderten dringlicher einer Lösung als die Optimierung der Übertragungsprotokolle.
\end{itemize}

\subsection{Testkonzept}
Um sicherzustellen, dass der CanSat problemlos funktioniert, wurden diverse Tests durchgeführt. Dazu zählt natürlich das Prüfen auf Funktionstüchtigkeit der Sensoren. Hierfür wurde jeder Sensor separat an verschiedene Mikrocontroller (BeagleBone Black, Arduino Mega) angeschlossen. Dadurch konnte verifiziert werden, dass jeder Sensor unter jedem Board den gleichen Output liefert. Zusätzlich wurde überprüft, ob die Sensoren auf eine Veränderung der zu messenden Eigenschaft reagieren. Um zu erkennen, ob die gemessenen Werte den tatsächlichen Werten entsprechen, werden diese im Umweltlabor von \href{https://www.atlas-elektronik.com/atlas-elektronik/}{Atlas Elektronik} getestet und kalibriert. Dort soll ebenfalls überprüft werden, wie stabil der CanSat ist, um vorherzusagen, ob er beim Aufschlag beschädigt wird. Das Testkonzept für die Sensoren beruht im Wesentlichen auf Trial and Error.

Die Antenne wird im \href{http://www.hf.uni-bremen.de/start/}{Labor für Hochfrequenztechnik an der Universität Bremen} durchgetestet. Hierzu wird die genaue Frequenz bestimmt, auf der die Antenne empfängt, und eine Impedanzanpassung durchgeführt.

Um den Fallschirm zu prüfen wurde ein Experiment durchgeführt. Dazu wurde die Zugkraft des Fallschirms gemessen. Aus einem Auto, welches mit einer Geschwindigkeit von 50 km/h fuhr, haben wir einige Testfallschirme an einem Newtonmeter befestigt und dieses aus dem Auto gehalten. Die Berechnung der Kraft sieht folgendermaßen aus:
\[
F = m \cdot g
\]
\[
F = 300g \cdot 9,81\frac{m}{s^2} \cdot \frac{1kg}{1000g}
\]
\[
F = 2,943 \frac{m}{s^2} kg
\]
Aus der Geschwindigkeit und dem Widerstand des Newtonmeters konnte ermittelt werden, dass der Fallschirm keine 30 cm Durchmesser benötigt. Weitere Tests haben ergeben, dass 16 cm ein besserer Wert ist. Bei einem Fallschirm dieser Größe können auch schon relative kleine Veränderung der Größe die Fallgeschwindigkeit enorm beeinflussen. \\
Beim Test der Fallschirmgröße ist uns aufgefallen, dass die Gaze bei mehreren Versuchen kleine Risse bekommen hat. Das Material, das wir verwendet haben, ist nicht stark genug, um die Belastungen während des Fluges zu tragen. Aus diesem Grund haben wir uns dazu entschieden, die Gaze komplett wegzulassen. Stattdessen verwenden wir, wie im letzten Jahr, acht Schnüre, die an der Dosendecke befestigt werden.

Um die Datenübertragung und die restlichen Features des CanSats zu überprüfen, wird das System als Ganzes getestet. Der CanSat wird eingeschaltet, die Antenne auf den CanSat gerichtet, die Bodenstation an die Antenne angeschlossen, die Satellitenkonfiguration eingestellt, der Hotspot der Bodenstation gestartet und die Android-App mit dem Hotspot verbunden. Anhand der einzelnen Komponenten der Datenübertragung (CanSat, Desktopapplikation, Android-Applikation) lässt sich etwa erkennen, an welcher Stelle der Übertragung Fehler auftreten. Funktioniert die Übertragung über alle Komponenten mit allen Sensoren, so ist der Test erfolgreich.